<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>MiniShop ‚Äî Demo E‚ÄëCommerce</title>
  <meta name="description" content="Situs e‚Äëcommerce sederhana, mobile‚Äëfirst, untuk dipasang di GitHub Pages. Tanpa database; autentikasi sisi klien + localStorage.">
  <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ctext y='0.9em' font-size='90'%3EüõçÔ∏è%3C/text%3E%3C/svg%3E">
  <style>
    :root{--bg:#0b0c10;--card:#111217;--muted:#9aa0a6;--text:#e8eaed;--brand:#6ee7b7;--brand2:#60a5fa;--danger:#ef4444}
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;background:var(--bg);color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Ubuntu,"Helvetica Neue",Arial,sans-serif}
    a{color:inherit;text-decoration:none}
    img{max-width:100%;display:block;border-radius:12px}
    .container{max-width:1100px;margin:0 auto;padding:16px}
    header{position:sticky;top:0;z-index:20;background:rgba(11,12,16,.9);backdrop-filter:saturate(150%) blur(10px);border-bottom:1px solid #1f2229}
    .nav{display:flex;align-items:center;justify-content:space-between;gap:8px}
    .brand{display:flex;gap:10px;align-items:center;font-weight:700}
    .brand .logo{width:34px;height:34px;display:grid;place-items:center;border-radius:10px;background:linear-gradient(135deg,var(--brand),var(--brand2));color:#0a0a0a}
    .actions{display:flex;gap:10px;align-items:center}
    .btn{appearance:none;border:0;border-radius:12px;padding:10px 14px;font-weight:600;background:#202430;color:var(--text);cursor:pointer;transition:transform .05s ease,opacity .2s ease;border:1px solid #2a2f3a}
    .btn:hover{opacity:.95}
    .btn:active{transform:translateY(1px)}
    .btn.primary{background:linear-gradient(135deg,var(--brand),var(--brand2));color:#0a0a0a;border-color:transparent}
    .btn.ghost{background:transparent;border-color:#2a2f3a}
    .chip{font-size:.85rem;background:#21242c;border:1px solid #2a2f3a;padding:4px 10px;border-radius:999px}

    main{display:grid;gap:18px}
    .hero{display:grid;gap:10px;padding:10px 0 4px}
    .hero h1{font-size:1.65rem;line-height:1.15;margin:0}
    .hero p{color:var(--muted);margin:0}

    .grid{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:12px}
    @media(min-width:640px){.grid{grid-template-columns:repeat(3,1fr)}}
    @media(min-width:900px){.grid{grid-template-columns:repeat(4,1fr)}}

    .card{background:var(--card);border:1px solid #1f2430;border-radius:16px;overflow:hidden;display:flex;flex-direction:column}
    .card .info{padding:12px;display:grid;gap:8px}
    .price{display:flex;align-items:center;gap:6px}
    .price .old{color:#8891a7;text-decoration:line-through;font-size:.9rem}

    .toolbar{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
    .search{flex:1;display:flex;gap:8px}
    .input{flex:1;padding:10px 12px;border-radius:12px;border:1px solid #2a2f3a;background:#181b22;color:var(--text)}
    .select{padding:10px 12px;border-radius:12px;border:1px solid #2a2f3a;background:#181b22;color:var(--text)}

    .sheet{position:fixed;inset:0;background:rgba(0,0,0,.4);display:none;place-items:end center;padding:16px}
    .sheet.open{display:grid}
    .panel{width:100%;max-width:520px;background:var(--card);border:1px solid #222839;border-radius:16px;padding:16px;display:grid;gap:12px}

    .modal{position:fixed;inset:0;background:rgba(0,0,0,.5);display:none;place-items:center;padding:16px}
    .modal.open{display:grid}
    .modal .box{width:100%;max-width:520px;background:var(--card);border:1px solid #222839;border-radius:16px;padding:16px}

    .row{display:flex;gap:10px;align-items:center}
    .row.between{justify-content:space-between}
    .muted{color:var(--muted)}
    .list{display:grid;gap:10px}
    .divider{height:1px;background:#1f2229;margin:6px 0}
    .empty{padding:18px;text-align:center;color:var(--muted)}
    footer{margin:24px 0 16px;color:#9aa0a6;text-align:center}
    .link{color:var(--brand2);text-decoration:underline}
    .danger{color:var(--danger)}
  </style>
</head>
<body>
  <header>
    <div class="container nav">
      <div class="brand">
        <div class="logo">üõçÔ∏è</div>
        <a href="#home" aria-label="Beranda MiniShop">MiniShop</a>
        <span class="chip" id="welcomeChip" style="display:none"></span>
      </div>
      <div class="actions">
        <button class="btn ghost" id="accountBtn">Akun</button>
        <button class="btn primary" id="cartBtn">Keranjang ‚Ä¢ <span id="cartCount">0</span></button>
      </div>
    </div>
  </header>

  <main class="container">
    <section class="hero">
      <h1>Toko mini</h1>
      <p>Situs statis ‚Ä¢ autentikasi sisi klien ‚Ä¢ keranjang di localStorage.</p>
      <div class="toolbar" style="margin-top:10px">
        <div class="search">
          <input id="q" class="input" placeholder="Cari produk‚Ä¶"/>
          <button class="btn" id="clearSearch">Bersihkan</button>
        </div>
        <select id="sort" class="select">
          <option value="popular">Urutkan: Populer</option>
          <option value="priceAsc">Harga: Rendah ‚Üí Tinggi</option>
          <option value="priceDesc">Harga: Tinggi ‚Üí Rendah</option>
          <option value="new">Terbaru</option>
        </select>
      </div>
    </section>

    <section id="productGrid" class="grid" aria-live="polite"></section>

    <footer>
      
    </footer>
  </main>

  <!-- Cart Sheet -->
  <div class="sheet" id="cartSheet" aria-hidden="true">
    <div class="panel" role="dialog" aria-modal="true" aria-label="Keranjang belanja">
      <div class="row between">
        <h2 style="margin:0">Keranjang Anda</h2>
        <button class="btn ghost" id="closeCart">Tutup</button>
      </div>
      <div id="cartItems" class="list"></div>
      <div class="divider"></div>
      <div class="row between"><span class="muted">Subtotal</span><strong id="subtotal">$0.00</strong></div>
      <div class="row between"><span class="muted">Pengiriman</span><span class="chip">GRATIS</span></div>
      <div class="row between"><strong>Total</strong><strong id="total">$0.00</strong></div>
      <button class="btn primary" id="checkoutBtn">Bayar</button>
    </div>
  </div>

  <!-- Product Modal -->
  <div class="modal" id="productModal" aria-hidden="true">
    <div class="box">
      <div class="row between">
        <h3 id="modalTitle" style="margin:0"></h3>
        <button class="btn ghost" id="closeModal">Tutup</button>
      </div>
      <div id="modalBody"></div>
    </div>
  </div>

  <!-- Auth / Account Modal -->
  <div class="modal" id="authModal" aria-hidden="true">
    <div class="box" id="authBox">
      <div class="row between">
        <h3 style="margin:0" id="authTitle">Masuk</h3>
        <button class="btn ghost" id="closeAuth">Tutup</button>
      </div>
      <div id="authBody"></div>
    </div>
  </div>

  <script>
  // ---- Demo Data ----
  const PRODUCTS = [
    {id:'p1', name:'Nimbus Hoodie', price:58, oldPrice:79, rating:4.7, image:'https://picsum.photos/seed/hoodie-nimbus/1000/800', tag:'new'},
    {id:'p2', name:'Nebula Sneakers', price:89, oldPrice:0, rating:4.8, image:'https://images.unsplash.com/photo-1542291026-7eec264c27ff?q=80&w=1000&auto=format&fit=crop', tag:'popular'},
    {id:'p3', name:'Cosmo Backpack', price:42, oldPrice:54, rating:4.4, image:'https://images.unsplash.com/photo-1500530855697-b586d89ba3ee?q=80&w=1000&auto=format&fit=crop', tag:'popular'},
    {id:'p4', name:'Orbit Watch', price:129, oldPrice:169, rating:4.6, image:'https://picsum.photos/seed/watch-orbit/1000/800', tag:'new'},
    {id:'p5', name:'Orbit Cap', price:24, oldPrice:0, rating:4.2, image:'https://images.unsplash.com/photo-1542834369-f10ebf06d3cb?q=80&w=1000&auto=format&fit=crop', tag:''},
    {id:'p6', name:'Galaxy Tee', price:28, oldPrice:35, rating:4.1, image:'https://images.unsplash.com/photo-1520975738056-7e738d3f2b3c?q=80&w=1000&auto=format&fit=crop', tag:''},
    {id:'p7', name:'Comet Sunglasses', price:36, oldPrice:0, rating:4.3, image:'https://images.unsplash.com/photo-1511499767150-a48a237f0083?q=80&w=1000&auto=format&fit=crop', tag:''},
    {id:'p8', name:'Hydra Bottle', price:19, oldPrice:25, rating:4.5, image:'https://picsum.photos/seed/bottle-hydra/1000/800', tag:'popular'},
  ];

  // ---- State helpers ----
  const LS_CART = 'minishop_cart_v1';
  const LS_USERS = 'minishop_users_v1';
  const LS_SESSION = 'minishop_session_v1';

  const $ = sel => document.querySelector(sel);
  const $$ = sel => Array.from(document.querySelectorAll(sel));

  const fmt = n => new Intl.NumberFormat('id-ID',{style:'currency',currency:'USD'}).format(n);
  function labelTag(tag){ return tag==='new' ? 'Baru' : tag==='popular' ? 'Populer' : '' }

  function getCart(){
    try{ return JSON.parse(localStorage.getItem(LS_CART)||'[]') }catch{ return [] }
  }
  function setCart(items){ localStorage.setItem(LS_CART, JSON.stringify(items)); updateCartCount(); }

  function getUsers(){ try{ return JSON.parse(localStorage.getItem(LS_USERS)||'{}') }catch{ return {} } }
  function setUsers(u){ localStorage.setItem(LS_USERS, JSON.stringify(u)) }
  function getSession(){ return localStorage.getItem(LS_SESSION) }
  function setSession(email){ if(email) localStorage.setItem(LS_SESSION,email); else localStorage.removeItem(LS_SESSION); renderWelcome() }

  function renderWelcome(){
    const email = getSession();
    const chip = $('#welcomeChip');
    if(email){ chip.textContent = email; chip.style.display='inline-flex'; } else { chip.style.display='none' }
  }

  // ---- Products ----
  function renderProducts(){
    const q = $('#q').value.trim().toLowerCase();
    const sort = $('#sort').value;
    let items = PRODUCTS.filter(p => p.name.toLowerCase().includes(q));
    if(sort==='priceAsc') items.sort((a,b)=>a.price-b.price);
    else if(sort==='priceDesc') items.sort((a,b)=>b.price-a.price);
    else if(sort==='new') items = items.sort((a,b)=>(b.tag==='new')-(a.tag==='new'));
    else items = items.sort((a,b)=>(b.tag==='popular')-(a.tag==='popular'));

    const grid = $('#productGrid');
    grid.innerHTML = items.map(p=>`
      <article class="card">
        <a href="#product-${p.id}" aria-label="Lihat ${p.name}" data-id="${p.id}" class="product-link">
          <img loading="lazy" src="${p.image}" alt="${p.name}">
        </a>
        <div class="info">
          <div class="row between">
            <strong>${p.name}</strong>
            ${p.tag?`<span class="chip">${labelTag(p.tag)}</span>`:''}
          </div>
          <div class="price">
            <strong>${fmt(p.price)}</strong>
            ${p.oldPrice?`<span class="old">${fmt(p.oldPrice)}</span>`:''}
          </div>
          <div class="row between">
            <span class="muted">‚≠ê ${p.rating}</span>
            <button class="btn" data-add="${p.id}">Tambah</button>
          </div>
        </div>
      </article>
    `).join('');

    // wire buttons/links
    $$('#productGrid [data-add]').forEach(btn=>btn.addEventListener('click', e=>{
      addToCart(e.currentTarget.getAttribute('data-add'));
    }));
    $$('#productGrid .product-link').forEach(a=>a.addEventListener('click', e=>{
      e.preventDefault();
      const id = e.currentTarget.getAttribute('data-id');
      openProduct(id);
    }));
  }

  // ---- Cart ----
  function updateCartCount(){
    const count = getCart().reduce((n,i)=>n+i.qty,0);
    $('#cartCount').textContent = count;
  }

  function addToCart(id){
    const cart = getCart();
    const i = cart.findIndex(x=>x.id===id);
    if(i>=0) cart[i].qty++; else cart.push({id,qty:1});
    setCart(cart);
    openCart();
  }

  function removeFromCart(id){
    let cart = getCart().filter(x=>x.id!==id);
    setCart(cart); renderCart();
  }

  function changeQty(id,delta){
    const cart = getCart();
    const i = cart.findIndex(x=>x.id===id);
    if(i>=0){ cart[i].qty = Math.max(1, cart[i].qty+delta); setCart(cart); renderCart(); }
  }

  function renderCart(){
    const cart = getCart();
    const items = cart.map(ci=>({ ...ci, product: PRODUCTS.find(p=>p.id===ci.id) })).filter(x=>x.product);
    const list = $('#cartItems');
    if(items.length===0){ list.innerHTML = `<div class="empty">Keranjang Anda kosong.</div>`; $('#subtotal').textContent = '$0.00'; $('#total').textContent='$0.00'; return }
    let subtotal = 0;
    list.innerHTML = items.map(({product,qty})=>{
      const line = product.price*qty; subtotal+=line;
      return `
        <div class="row" style="gap:12px">
          <img src="${product.image}" alt="${product.name}" style="width:64px;height:64px;object-fit:cover;border-radius:10px">
          <div style="flex:1">
            <div class="row between">
              <strong>${product.name}</strong>
              <button class="btn ghost danger" data-remove="${product.id}">Hapus</button>
            </div>
            <div class="row between">
              <span class="muted">${fmt(product.price)} √ó ${qty}</span>
              <div class="row">
                <button class="btn ghost" data-dec="${product.id}">‚àí</button>
                <button class="btn ghost" data-inc="${product.id}">+</button>
              </div>
            </div>
          </div>
        </div>`
    }).join('');
    $('#subtotal').textContent = fmt(subtotal);
    $('#total').textContent = fmt(subtotal);

    list.querySelectorAll('[data-remove]').forEach(b=>b.addEventListener('click',e=>removeFromCart(e.currentTarget.getAttribute('data-remove'))));
    list.querySelectorAll('[data-inc]').forEach(b=>b.addEventListener('click',e=>changeQty(e.currentTarget.getAttribute('data-inc'),+1)));
    list.querySelectorAll('[data-dec]').forEach(b=>b.addEventListener('click',e=>changeQty(e.currentTarget.getAttribute('data-dec'),-1)));
  }

  function openCart(){ $('#cartSheet').classList.add('open'); renderCart() }
  function closeCart(){ $('#cartSheet').classList.remove('open') }

  // ---- Product Modal ----
  function openProduct(id){
    const p = PRODUCTS.find(x=>x.id===id); if(!p) return;
    $('#modalTitle').textContent = p.name;
    $('#modalBody').innerHTML = `
      <img src="${p.image}" alt="${p.name}" style="max-height:320px;width:100%;object-fit:cover;border-radius:12px">
      <div class="row between" style="margin-top:8px">
        <div>
          <div class="price"><strong>${fmt(p.price)}</strong> ${p.oldPrice?`<span class='old'>${fmt(p.oldPrice)}</span>`:''}</div>
          <div class="muted">‚≠ê ${p.rating} penilaian</div>
        </div>
        <button class="btn" id="modalAdd">Tambah ke keranjang</button>
      </div>
      <p class="muted">A lovely ${p.name} with premium materials and minimalist vibes. (Demo text)</p>`;
    $('#productModal').classList.add('open');
    $('#modalAdd').onclick = ()=> addToCart(p.id);
  }
  function closeProduct(){ $('#productModal').classList.remove('open') }

  // ---- Auth / Account ----
  function authView(){
    const email = getSession();
    const body = $('#authBody');
    const title = $('#authTitle');
    if(email){
      title.textContent = 'Akun Anda';
      body.innerHTML = `
        <p class="muted">Masuk sebagai <strong>${email}</strong></p>
        <div class="divider"></div>
        <h4 style="margin:0 0 6px">Pesanan</h4>
        <div id="orders" class="list"></div>
        <div class="divider"></div>
        <div class="row between">
          <button class="btn ghost" id="signOut">Keluar</button>
          <button class="btn danger" id="deleteAcc">Hapus akun</button>
        </div>`;
      renderOrders(email);
      $('#signOut').onclick = ()=>{ setSession(null); $('#authModal').classList.remove('open') };
      $('#deleteAcc').onclick = ()=>{
        if(confirm('Hapus akun dan data lokal\?')){
          const users = getUsers(); delete users[email]; setUsers(users);
          setSession(null); localStorage.removeItem(LS_CART); updateCartCount(); $('#authModal').classList.remove('open');
        }
      }
    } else {
      title.textContent = 'Selamat datang';
      body.innerHTML = `
        <p class="muted">Autentikasi demo sisi klien (localStorage). Jangan gunakan kredensial asli.</p>
        <form id="signInForm" class="list" autocomplete="off">
          <input class="input" name="email" placeholder="Email" required type="email">
          <input class="input" name="password" placeholder="Kata sandi" required type="password" minlength="4">
          <button class="btn primary" type="submit">Masuk</button>
        </form>
        <div class="divider"></div>
        <details>
          <summary>Buat akun</summary>
          <form id="signUpForm" class="list" autocomplete="off" style="margin-top:8px">
            <input class="input" name="email" placeholder="Email" required type="email">
            <input class="input" name="password" placeholder="Kata sandi (min 4 karakter)" required type="password" minlength="4">
            <button class="btn" type="submit">Daftar</button>
          </form>
        </details>`;
      $('#signInForm').onsubmit = (e)=>{ e.preventDefault(); const f = e.target; const email=f.email.value.trim().toLowerCase(); const pass=f.password.value;
        const users = getUsers(); if(users[email] && users[email].password===pass){ setSession(email); authView() } else alert('Email\/kata sandi salah'); };
      $('#signUpForm').onsubmit = (e)=>{ e.preventDefault(); const f = e.target; const email=f.email.value.trim().toLowerCase(); const pass=f.password.value;
        const users = getUsers(); if(users[email]){ alert('Email sudah terdaftar'); return }
        users[email] = { password: pass, orders: [] }; setUsers(users); setSession(email); authView(); };
    }
  }

  function renderOrders(email){
    const users = getUsers(); const u = users[email];
    const wrap = $('#orders');
    if(!u || !u.orders || u.orders.length===0){ wrap.innerHTML = '<div class="empty">Belum ada pesanan.</div>'; return }
    wrap.innerHTML = u.orders.map(o=>{
      const total = o.items.reduce((n,it)=>n + PRODUCTS.find(p=>p.id===it.id).price*it.qty,0);
      return `<div class="card" style="padding:12px">
        <div class="row between"><strong>Pesanan ${o.id}</strong><span class="muted">${new Date(o.ts).toLocaleString()}</span></div>
        <div class="muted">${o.items.map(it=>`${it.qty}√ó ${PRODUCTS.find(p=>p.id===it.id).name}`).join(', ')}</div>
        <div class="row between" style="margin-top:6px"><span class="muted">Total</span><strong>${fmt(total)}</strong></div>
      </div>`
    }).join('');
  }

  function openAuth(){ $('#authModal').classList.add('open'); authView() }
  function closeAuth(){ $('#authModal').classList.remove('open') }

  // ---- Checkout ----
  function checkout(){
    const email = getSession();
    if(!email){ openAuth(); alert('Silakan masuk untuk checkout'); return }
    const cart = getCart(); if(!cart.length){ alert('Your cart is empty'); return }
    const body = $('#modalBody');
    $('#modalTitle').textContent = 'Pembayaran';
    body.innerHTML = `
      <form id="checkoutForm" class="list">
        <input class="input" name="name" placeholder="Nama lengkap" required>
        <input class="input" name="address" placeholder="Alamat pengiriman" required>
        <input class="input" name="city" placeholder="Kota" required>
        <input class="input" name="zip" placeholder="Kode Pos" required>
        <button class="btn primary" type="submit">Buat pesanan</button>
      </form>`;
    $('#productModal').classList.add('open');
    $('#checkoutForm').onsubmit = (e)=>{
      e.preventDefault();
      const order = { id: Math.random().toString(36).slice(2,8).toUpperCase(), ts: Date.now(), items: getCart() };
      const users = getUsers(); users[email].orders = users[email].orders||[]; users[email].orders.unshift(order); setUsers(users);
      setCart([]); renderCart();
      $('#modalBody').innerHTML = `<p>üéâ Pesanan <strong>${order.id}</strong> berhasil dibuat!</p><p class="muted">Anda bisa melihatnya kapan saja di menu Akun.</p>`;
      updateCartCount();
    };
  }

  // ---- Events ----
  $('#q').addEventListener('input', renderProducts);
  $('#clearSearch').addEventListener('click', ()=>{ $('#q').value=''; renderProducts() });
  $('#sort').addEventListener('change', renderProducts);

  $('#cartBtn').addEventListener('click', openCart);
  $('#closeCart').addEventListener('click', closeCart);
  $('#checkoutBtn').addEventListener('click', checkout);

  $('#closeModal').addEventListener('click', closeProduct);
  $('#accountBtn').addEventListener('click', openAuth);
  $('#closeAuth').addEventListener('click', closeAuth);

  // ---- Init ----
  renderProducts(); updateCartCount(); renderWelcome();
  </script>
</body>
</html>
